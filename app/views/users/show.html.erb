<h2>Hello <%= @user.user_name %></h2>

<% if @user.products.blank? %>
  <p>You have not listed any products yet, time to change that!</p>
  <%= button_to "get started", new_product_path, method: :get %>

<% else %>
  <article class="orders">
    <h2>ORDER FULFILLMENT</h2>
    <section class="order-summary">
      <h3><%= "Total Number of Orders: #{@orders.count}" %></h3>
      <h3><%= "Total Revenues: #{currency(@user.revenues)}" %></h3>
    </section>
    <section class="filter">
      <span>Select View</span>
      <%= link_to "Paid", orderstatus_path(@user.id, orderstatus: "paid") %>
      <!-- <ul class="dropdown menu" data-dropdown-menu> -->
        <!-- <li><%# link_to "Pending", orderstatus_path(@user.id, status: "pending") %></li> -->
        <!-- <li><%# link_to "Paid", orderstatus_path(@user.id, status: "paid") %></li> -->
      <!-- </ul> -->
      <!-- <label for="view_only">View Only</label>
      <select name="status" onchange="this.form.submit();">
        <option value="all">All</option>
        <option value="complete">Complete</option>
        <option value="cancelled">Cancelled</option>
      </select> -->
    </section>
    <table>
      <thead>
        <tr>
          <th>Order</th>
          <!-- <th>Order Item</th>
          <th>Quantity</th>
          <th>Subtotal</th>
          <th>Description (show product link)</th>
          <th>Date/Time Placed</th>
          <th>Mark Shipped</th> -->
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <% @orders.each do |order| %>
        <tr>
          <td><%= link_to "Order No. #{order.id}", order_path(order) %></td>
          <td>Status: <%= order.status %></td>
        </tr>
        <% end %>
      </tbody>
    </table>
<%= @orders_paid %>
  </article>

  <article class="products-summary">
    <h2>PRODUCTS</h2>
    <%= link_to "Add a category", new_category_path, method: :get, class: "button hollow" %>
    <%= link_to "Add a product", new_product_path, method: :get, class: "button hollow" %>

    <h2 class="productlist"> Active Products: </h2>
    <table>
    <tbody>
      <% @products.each do |product| %>
      <tr>
        <td><%= button_to "#{product.name.capitalize}", product_path(product) %></td>
        <td><%= button_to "Edit", edit_product_path(product), { method: :get, class: "hollow button" }  %></td>
        <td><%= button_to "Retire", product_path(product), { method: :update, class: "secondary hollow button" } %></td>
        <td><%= button_to "Delete", product_path(product), method: :delete, class: "button alert", data: { confirm: 'Are you certain you want to delete this?' } %></td>
      </tr>
      <% end %>
    </tbody>
  </table>
  <h2 class="retiredproducts"> Retired Products: </h2>
  <% if @retired.empty? %>
  <p>
    You have no retired products.
  </p>
  <% else %>
    <table>
      <tbody>
        <% @retired.each do |t| %>
        <tr>
          <td><%= link_to "Edit", edit_product_path(t), { method: :get, class: "hollow button" }  %></td>
          <td><%= link_to "Activate", product_path(t), { method: :update, class: "secondary hollow button" } %></td>
          <td><%= link_to "Delete", product_path(t), method: :delete, class: "button alert", data: { confirm: 'Are you certain you want to delete this?' }%>
          </tr>
          <% end %>
        </tbody>
      </table>
    <% end %>
  </article>
  <% end %>
