<!-- @TODO: display errors correctly if order_items does not update -->
<!-- <% if flash[:insufficient_stock] %>
<h2><%= flash[:insufficient_stock] %></h2>
<% end %> -->
<h1>Your Order: <%= @order.id %></h1>
<% @order_items.each do |item| %>
<h3><%= item.product.name %></h3>
<!-- <% if item.errors.any? %>
  <ul class="errors">
    <% item.errors.each do |column, message| %>
      <li>
        <strong><%= column.capitalize %></strong> <%= message %>
      </li>
    <% end %>
  </ul>
<% end %> -->
<ul>
  <li>
    Price: <%= currency(item.product.price) %>
  </li>
  <li>
    <%= form_for [@order, item] do |f| %>
    <%= f.label :quantity %>
    <%= f.text_field :quantity %>
    <%= f.submit "Update" %>
    <% end %>
  </li>
  <li>
    Subtotal: <%= currency(item.subtotal) %>
    <%= button_to [@order, item], method: :delete, class: "button tiny", data: { confirm: "Are you sure?" } do %>Remove from Cart<% end %>
  </li>
</ul>
<% end %>
<%= button_to "Checkout", checkout_order_path(@order), method: :get %>
